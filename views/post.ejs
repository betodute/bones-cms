<% layout('layouts/boilerplate') %>
<div class="card">
  <div class="card-body">
    <h2><%= post.title %></h2>
    <p><%= post.date.toLocaleDateString() %>, <%= post.date.toLocaleTimeString([], { hour: "numeric", minute: "2-digit" }) %></p>
    <p><%- addHashtagLinks(post.content) %></p>
    <p><a href="/posts/edit/<%= post._id %>">Edit</a></p>
    <p><a href="/posts/delete/<%= post._id %>">Delete</a></p>
    <p><a href="/">Back to all posts</a></p>
  </div>
</div>

<% function addHashtagLinks(content) { %>
  <% const hashtagRegex = /#\w+\b/g; %>
  <% return content.replace(hashtagRegex, (match) => {
      return `<a href="/hashtags/${match.substring(1)}">${match}</a>`;
  }); %>
<% } %>